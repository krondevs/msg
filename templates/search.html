<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<script src="/static/js/jquery-3.6.3.min.js"></script>
<title>B√∫squeda de Servicios</title>
<style>
:root{
    --bg:#ece5dd;
    --card:#ffffff;
    --text:#1f2937;
    --muted:#6b7280;
    --primary:#25d366;
    --primary-dark:#128c7e;
    --border:#e5e7eb;
    --shadow:0 12px 28px rgba(0,0,0,0.12);
}

*{
    box-sizing:border-box;
    margin:0;
    padding:0;
}

body{
    font-family:Arial, sans-serif;
    background:var(--bg);
    color:var(--text);
}

.app{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    padding:16px;
    gap:16px;
}

.header{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    color:var(--primary-dark);
    font-weight:bold;
}

.logo{
    width:38px;
    height:38px;
    border-radius:12px;
    background:var(--primary);
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    font-size:18px;
}

.container{
    width:100%;
    max-width:520px;
    margin:0 auto;
    background:var(--card);
    border-radius:16px;
    box-shadow:var(--shadow);
    overflow:hidden;
}

.progress{
    display:flex;
    gap:6px;
    padding:12px 16px 0 16px;
}

.dot{
    flex:1;
    height:6px;
    border-radius:999px;
    background:#e5e7eb;
    transition:background 0.3s ease;
}

.dot.active{
    background:var(--primary);
}

.form{
    padding:16px;
    display:flex;
    flex-direction:column;
    gap:12px;
}

.step{
    display:none;
    opacity:0;
    transform:translateX(12px);
    transition:opacity 0.25s ease, transform 0.25s ease;
}

.step.active{
    display:block;
    opacity:1;
    transform:translateX(0);
}

.form-row{
    display:flex;
    flex-direction:column;
    gap:8px;
}

.input, .select{
    padding:12px 14px;
    border:1px solid var(--border);
    border-radius:10px;
    outline:none;
    font-size:14px;
}

.input:focus, .select:focus{
    border-color:var(--primary);
}

.btn-row{
    display:flex;
    gap:10px;
}

.btn{
    background:var(--primary);
    color:#fff;
    border:none;
    padding:12px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
    flex:1;
}

.btn.secondary{
    background:#e9f7ef;
    color:#0f766e;
    border:1px solid #b7ebc6;
}

.helper{
    font-size:12px;
    color:var(--muted);
}

.grid-2{
    display:grid;
    gap:10px;
    grid-template-columns:1fr;
}

.summary{
    background:#f8fafc;
    border:1px solid var(--border);
    border-radius:12px;
    padding:12px;
    font-size:14px;
    color:var(--text);
    display:flex;
    flex-direction:column;
    gap:8px;
}

.results{
    display:flex;
    flex-direction:column;
    gap:10px;
}

.result-card{
    border:1px solid var(--border);
    border-radius:12px;
    padding:12px;
    display:flex;
    flex-direction:column;
    gap:6px;
    background:#fff;
    cursor:pointer;
    transition:transform 0.2s ease, box-shadow 0.2s ease;
}

.result-card:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 20px rgba(0,0,0,0.08);
}

.result-title{
    font-weight:bold;
    color:var(--primary-dark);
}

.result-meta{
    font-size:13px;
    color:var(--muted);
}

.selected-box{
    border:1px dashed #9ae6b4;
    background:#f0fdf4;
    border-radius:10px;
    padding:10px;
    font-size:13px;
    color:#0f766e;
}

@media (min-width:700px){
    .app{
        align-items:center;
        justify-content:center;
    }
    .container{
        max-width:740px;
    }
    .grid-2{
        grid-template-columns:1fr 1fr;
    }
}
</style>
</head>
<body onload="initWizard()">
<div class="app">
    <div class="header">
        <div class="logo">üü¢</div>
        <div>Buscar Servicios</div>
    </div>

    <div class="container">
        <div class="progress" id="progress">
            <div class="dot active"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>

        <form class="form" id="wizard">
            <div class="step active" data-step="0">
                <div class="form-row">
                    <label>¬øC√≥mo te llamas?</label>
                    <input class="input" type="text" id="nombre"
                        placeholder="Tu nombre">
                </div>
                <div class="helper">
                    As√≠ personalizamos la b√∫squeda para ti.
                </div>
                <div class="btn-row">
                    <button class="btn" type="button" onclick="nextStep()">
                        Continuar
                    </button>
                </div>
            </div>

            <div class="step" data-step="1">
                <div class="grid-2">
                    <div class="form-row">
                        <label>Pa√≠s</label>
                        <select class="select" id="pais">
                            <option value="">Selecciona tu pa√≠s</option>
                            <option>Venezuela</option>
                            <option>Colombia</option>
                            <option>Per√∫</option>
                            <option>M√©xico</option>
                            <option>Argentina</option>
                            <option>Chile</option>
                            <option>Espa√±a</option>
                            <option>Otro</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label>Provincia o Estado</label>
                        <input class="input" type="text" id="provincia"
                            placeholder="Lara, Bogot√°, Lima">
                    </div>
                    <div class="form-row">
                        <label>Ciudad</label>
                        <input class="input" type="text" id="ciudad"
                            placeholder="Barquisimeto">
                    </div>
                </div>
                <div class="btn-row">
                    <button class="btn secondary" type="button"
                        onclick="prevStep()">
                        Atr√°s
                    </button>
                    <button class="btn" type="button" onclick="nextStep()">
                        Continuar
                    </button>
                </div>
            </div>

            <div class="step" data-step="2">
                <div class="grid-2">
                    <div class="form-row">
                        <label>Servicio</label>
                        <select class="select" id="servicio">
                            <option value="">Selecciona un servicio</option>
                            <option>Arquitectura</option>
                            <option>Abogados</option>
                            <option>Ingenier√≠a</option>
                            <option>Medicina</option>
                            <option>Psicolog√≠a</option>
                            <option>Dise√±o gr√°fico</option>
                            <option>Electricista</option>
                            <option>Carpinter√≠a</option>
                            <option>Plomer√≠a</option>
                            <option>Otro</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label>Especialidad</label>
                        <input class="input" type="text" id="especialidad"
                            placeholder="Estructuras, penal, etc">
                    </div>
                </div>
                <div class="helper">
                    Puedes buscar por especialidad si lo deseas.
                </div>
                <div class="btn-row">
                    <button class="btn secondary" type="button"
                        onclick="prevStep()">
                        Atr√°s
                    </button>
                    <button class="btn" type="button"
                        onclick="startSearch()">
                        Buscar profesionales
                    </button>
                </div>
            </div>

            <div class="step" data-step="3">
                <div class="summary" id="summary"></div>
                <div class="results" id="resultsList"></div>
                <div class="btn-row">
                    <button class="btn secondary" type="button"
                        onclick="prevStep()">
                        Atr√°s
                    </button>
                </div>
                <div class="helper">
                    Elige un responsable para continuar.
                </div>
            </div>

            <div class="step" data-step="4">
                <div class="selected-box" id="selectedBox">
                    Responsable seleccionado: Ninguno
                </div>
                <div class="grid-2">
                    <div class="form-row">
                        <label>C√©dula</label>
                        <input class="input" type="text" id="cedula"
                            placeholder="V-12345678">
                    </div>
                    <div class="form-row">
                        <label>Tel√©fono</label>
                        <input class="input" type="tel" id="telefono"
                            placeholder="555-0000">
                    </div>
                    <div class="form-row">
                        <label>Direcci√≥n</label>
                        <input class="input" type="text" id="direccion"
                            placeholder="Calle, n√∫mero, zona">
                    </div>
                </div>
                <div class="btn-row">
                    <button class="btn secondary" type="button"
                        onclick="prevStep()">
                        Atr√°s
                    </button>
                    <button class="btn" type="button">
                        Continuar solicitud
                    </button>
                </div>
                <div class="helper">
                    Estos datos ayudan a conectar con el profesional correcto.
                </div>
            </div>
        </form>
    </div>
</div>

<script src="/static/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/jqueryx.js"></script>
<script>
let currentStep = 0;
let selectedResponsible = null;

function initWizard(){
    setStep(0);
}

function setStep(index){
    const $steps = $(".step");
    const $dots = $(".dot");
    $steps.removeClass("active");
    $dots.removeClass("active");

    currentStep = index;
    $steps.eq(currentStep).addClass("active");
    $dots.eq(currentStep).addClass("active");

    if(currentStep === 3){
        renderSummary();
    }
}

function nextStep(){
    if(currentStep < $(".step").length - 1){
        setStep(currentStep + 1);
    }
}

function prevStep(){
    if(currentStep > 0){
        setStep(currentStep - 1);
    }
}

function renderSummary(){
    const data = {
        Nombre: $("#nombre").val() || "No indicado",
        Pa√≠s: $("#pais").val() || "No indicado",
        Provincia: $("#provincia").val() || "No indicado",
        Ciudad: $("#ciudad").val() || "No indicado",
        Servicio: $("#servicio").val() || "No indicado",
        Especialidad: $("#especialidad").val() || "No indicado"
    };

    const lines = Object.entries(data)
        .map(([k, v]) => `${k}: ${v}`)
        .join("<br>");
    $("#summary").html(lines);
}

function startSearch(){
    renderSummary();
    renderResults();
    setStep(3);
}

function renderResults(){
    const results = [
        {apodo:"ArqSofia", cantidad:12},
        {apodo:"LegalMart", cantidad:8},
        {apodo:"IngCarlos", cantidad:15},
        {apodo:"PsiLuz", cantidad:6}
    ];

    const html = results.map(r => {
        return `
            <div class="result-card"
                onclick="selectResult('${r.apodo}', ${r.cantidad})">
                <div class="result-title">${r.apodo}</div>
                <div class="result-meta">
                    Profesionales a cargo: ${r.cantidad}
                </div>
            </div>
        `;
    }).join("");

    $("#resultsList").html(html);
}

function selectResult(apodo, cantidad){
    selectedResponsible = {apodo, cantidad};
    $("#selectedBox").text(
        `Responsable seleccionado: ${apodo} ` +
        `(${cantidad} profesionales)`
    );
    setStep(4);
}
</script>
</body>
</html>